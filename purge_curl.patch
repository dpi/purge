Index: purge.inc
===================================================================
--- purge.inc	(revision 15328)
+++ purge.inc	(working copy)
@@ -119,8 +119,8 @@
   // Execute the purge requests
   ob_start();
   do {
-    curl_multi_exec($curl_purges, $running);
-  } while ($running > 0);
+    $mrc = curl_multi_exec($curl_purges, $running);
+  } while ($mrc == CURLM_CALL_MULTI_PERFORM);
   ob_end_clean();
 
   // Result collection. Collects the http code returned for each url purged
