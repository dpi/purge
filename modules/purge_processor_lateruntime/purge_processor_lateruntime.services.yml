services:

  # PURGE_PROCESSOR_LATERUNTIME.PROCESSOR
  #
  # Subscribes to the kernel FINISH_REQUEST event and checks for items in the
  # purge queue upon every request. If there are items, it attempts to process
  # a number of items and deletes from- or releases back to the queue.
  purge_processor_lateruntime.processor:
    class: Drupal\purge_processor_lateruntime\EventSubscriber\LateRuntimeProcessor
    tags:
      - { name: event_subscriber }
      - { name: purge_processor }
    calls:
      - [setContainer, ['@service_container']]
